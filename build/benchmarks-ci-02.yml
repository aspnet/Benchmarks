# Do not change this file, it is generated using these steps:
# - The file benchmarks*.json defines how each pipeline set of jobs is run in parallel
# - Update the associated benchmarks*.json file with machine and scenario updates
# - Install python and install the requirements for the crank-scheduler in benchmarks/scripts/crank-scheduler/requirements.txt
# - Run the scheduler specifying the desired benchmarks*.json file, this template, and benchmarks/output to automatically overwrite the current pipeline.
# - Ex. python ./scripts/crank-scheduler/main.py --config ./build/benchmarks_ci.json --template ./build/benchmarks.template.liquid --yaml-output ./build

trigger: none
pr: none

schedules:
- cron: "0 9/12 * * *"
  always: true # always run the pipeline even if there have not been source code changes since the last successful scheduled run.
  branches:
    include:
    - main

variables:
  - template: job-variables.yml
  - name: session
    value: $(Build.BuildNumber)
  - name: buildId
    value: $(Build.BuildId)
  - name: buildNumber
    value: $(Build.BuildNumber)
  - name: am
    value: $[lt(format('{0:HH}', pipeline.startTime), 12)]
  - name: pm
    value: $[ge(format('{0:HH}', pipeline.startTime), 12)]

jobs:

# GROUP 1

- job: Containers_Gold_Lin
  displayName: 1- Containers Gold Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: []
  condition: succeededOrFailed()
  steps:
  - template: containers-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine1
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-lin-app --profile gold-load-load --profile gold-db-db "
      
- job: Containers_Intel_Lin
  displayName: 1- Containers Intel Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: []
  condition: succeededOrFailed()
  steps:
  - template: containers-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine2
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-lin-app --profile intel-load-load --profile intel-load2-db "
      
- job: Blazor_Intel_Perflin
  displayName: 1- Blazor Intel Perflin
  pool: server
  timeoutInMinutes: 120
  dependsOn: []
  condition: succeededOrFailed()
  steps:
  - template: blazor-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine3
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-perflin-app --profile intel-perfload-load "
      
- job: HttpClient_Gold_Win
  displayName: 1- HttpClient Gold Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: []
  condition: succeededOrFailed()
  steps:
  - template: httpclient-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: mono
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-win-app --profile gold-load2-load "
      
# GROUP 2

- job: PGO_Gold_Lin
  displayName: 2- PGO Gold Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Containers_Gold_Lin, Containers_Intel_Lin, Blazor_Intel_Perflin, HttpClient_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: pgo-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine1
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-lin-app --profile gold-load-load --profile gold-db-db "
      
- job: PGO_Intel_Lin
  displayName: 2- PGO Intel Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Containers_Gold_Lin, Containers_Intel_Lin, Blazor_Intel_Perflin, HttpClient_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: pgo-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine2
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-lin-app --profile intel-load-load --profile intel-load2-db "
      
- job: HttpClient_Intel_Win
  displayName: 2- HttpClient Intel Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Containers_Gold_Lin, Containers_Intel_Lin, Blazor_Intel_Perflin, HttpClient_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: httpclient-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine3
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-win-app --profile intel-db-load "
      
- job: Baselines_Gold_Win
  displayName: 2- Baselines Gold Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Containers_Gold_Lin, Containers_Intel_Lin, Blazor_Intel_Perflin, HttpClient_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: baselines-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: mono
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-win-app --profile gold-load2-load "
      
# GROUP 3

- job: Baselines_Database_Gold_Lin
  displayName: 3- Baselines Database Gold Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [PGO_Gold_Lin, PGO_Intel_Lin, HttpClient_Intel_Win, Baselines_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: baselines-database-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine1
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-lin-app --profile gold-load-load --profile gold-db-db "
      
- job: Baselines_Database_Intel_Lin
  displayName: 3- Baselines Database Intel Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [PGO_Gold_Lin, PGO_Intel_Lin, HttpClient_Intel_Win, Baselines_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: baselines-database-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine2
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-lin-app --profile intel-load-load --profile intel-load2-db "
      
- job: Baselines_Intel_Win
  displayName: 3- Baselines Intel Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [PGO_Gold_Lin, PGO_Intel_Lin, HttpClient_Intel_Win, Baselines_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: baselines-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine3
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-win-app --profile intel-db-load "
      
- job: Baselines_Amd_Lin2
  displayName: 3- Baselines Amd Lin2
  pool: server
  timeoutInMinutes: 120
  dependsOn: [PGO_Gold_Lin, PGO_Intel_Lin, HttpClient_Intel_Win, Baselines_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: baselines-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: mono
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile amd-lin2-app --profile gold-load2-load "
      
# GROUP 4

- job: Baselines_Database_Gold_Win
  displayName: 4- Baselines Database Gold Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Baselines_Database_Gold_Lin, Baselines_Database_Intel_Lin, Baselines_Intel_Win, Baselines_Amd_Lin2]
  condition: succeededOrFailed()
  steps:
  - template: baselines-database-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine1
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-win-app --profile gold-load2-load --profile gold-db-db "
      
- job: Baselines_Database_Intel_Win
  displayName: 4- Baselines Database Intel Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Baselines_Database_Gold_Lin, Baselines_Database_Intel_Lin, Baselines_Intel_Win, Baselines_Amd_Lin2]
  condition: succeededOrFailed()
  steps:
  - template: baselines-database-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine2
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-win-app --profile intel-load2-load --profile intel-load-db "
      
- job: Blazor_Gold_Lin
  displayName: 4- Blazor Gold Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Baselines_Database_Gold_Lin, Baselines_Database_Intel_Lin, Baselines_Intel_Win, Baselines_Amd_Lin2]
  condition: succeededOrFailed()
  steps:
  - template: blazor-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine3
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-lin-app --profile gold-load-load "
      
- job: Blazor_Intel_Lin
  displayName: 4- Blazor Intel Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Baselines_Database_Gold_Lin, Baselines_Database_Intel_Lin, Baselines_Intel_Win, Baselines_Amd_Lin2]
  condition: succeededOrFailed()
  steps:
  - template: blazor-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: mono
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-lin-app --profile intel-db-load "
      
# GROUP 5

- job: SslStream_Gold_Lin
  displayName: 5- SslStream Gold Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Baselines_Database_Gold_Win, Baselines_Database_Intel_Win, Blazor_Gold_Lin, Blazor_Intel_Lin]
  condition: succeededOrFailed()
  steps:
  - template: sslstream-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine1
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-lin-app --profile gold-load-load "
      
- job: SslStream_Intel_Lin
  displayName: 5- SslStream Intel Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Baselines_Database_Gold_Win, Baselines_Database_Intel_Win, Blazor_Gold_Lin, Blazor_Intel_Lin]
  condition: succeededOrFailed()
  steps:
  - template: sslstream-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine2
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-lin-app --profile intel-load-load "
      
- job: SignalR_Gold_Win
  displayName: 5- SignalR Gold Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Baselines_Database_Gold_Win, Baselines_Database_Intel_Win, Blazor_Gold_Lin, Blazor_Intel_Lin]
  condition: succeededOrFailed()
  steps:
  - template: signalr-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine3
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-win-app --profile gold-load2-load "
      
- job: MVC_Intel_Win
  displayName: 5- MVC Intel Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Baselines_Database_Gold_Win, Baselines_Database_Intel_Win, Blazor_Gold_Lin, Blazor_Intel_Lin]
  condition: succeededOrFailed()
  steps:
  - template: mvc-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: mono
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-win-app --profile intel-load2-load --profile intel-db-db "
      
# GROUP 6

- job: Frameworks_Database_Gold_Lin
  displayName: 6- Frameworks Database Gold Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [SslStream_Gold_Lin, SslStream_Intel_Lin, SignalR_Gold_Win, MVC_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: frameworks-database-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine1
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-lin-app --profile gold-load-load --profile gold-db-db "
      
- job: Frameworks_Database_Intel_Lin
  displayName: 6- Frameworks Database Intel Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [SslStream_Gold_Lin, SslStream_Intel_Lin, SignalR_Gold_Win, MVC_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: frameworks-database-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine2
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-lin-app --profile intel-load-load --profile intel-load2-db "
      
- job: Trends_Gold_Win
  displayName: 6- Trends Gold Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [SslStream_Gold_Lin, SslStream_Intel_Lin, SignalR_Gold_Win, MVC_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: trend-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine3
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-win-app --profile gold-load2-load "
      
- job: EF_Core_Intel_Win
  displayName: 6- EF Core Intel Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [SslStream_Gold_Lin, SslStream_Intel_Lin, SignalR_Gold_Win, MVC_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: efcore-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: mono
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-win-app --profile intel-db-load "
      
# GROUP 7

- job: MVC_Gold_Lin
  displayName: 7- MVC Gold Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Frameworks_Database_Gold_Lin, Frameworks_Database_Intel_Lin, Trends_Gold_Win, EF_Core_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: mvc-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine1
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-lin-app --profile gold-load-load --profile gold-db-db "
      
- job: MVC_Intel_Lin
  displayName: 7- MVC Intel Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Frameworks_Database_Gold_Lin, Frameworks_Database_Intel_Lin, Trends_Gold_Win, EF_Core_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: mvc-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine2
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-lin-app --profile intel-load-load --profile intel-load2-db "
      
- job: Trends_Amd_Lin2
  displayName: 7- Trends Amd Lin2
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Frameworks_Database_Gold_Lin, Frameworks_Database_Intel_Lin, Trends_Gold_Win, EF_Core_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: trend-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine3
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile amd-lin2-app --profile gold-load2-load "
      
- job: GC_Gold_Win
  displayName: 7- GC Gold Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Frameworks_Database_Gold_Lin, Frameworks_Database_Intel_Lin, Trends_Gold_Win, EF_Core_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: gc-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: mono
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-win-app "
      
# GROUP 8

- job: NativeAOT_Gold_Win
  displayName: 8- NativeAOT Gold Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [MVC_Gold_Lin, MVC_Intel_Lin, Trends_Amd_Lin2, GC_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: nativeaot-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine1
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-win-app --profile gold-load2-load --profile gold-db-db "
      
- job: Trends_Gold_Lin
  displayName: 8- Trends Gold Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [MVC_Gold_Lin, MVC_Intel_Lin, Trends_Amd_Lin2, GC_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: trend-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine2
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-lin-app --profile gold-load-load "
      
- job: Trends_Intel_Lin
  displayName: 8- Trends Intel Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [MVC_Gold_Lin, MVC_Intel_Lin, Trends_Amd_Lin2, GC_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: trend-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine3
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-lin-app --profile intel-load-load "
      
- job: Trends_Database_Intel_Win
  displayName: 8- Trends Database Intel Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [MVC_Gold_Lin, MVC_Intel_Lin, Trends_Amd_Lin2, GC_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: trend-database-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: mono
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-win-app --profile intel-load2-load --profile intel-db-db "
      
# GROUP 9

- job: Frameworks_Amd_Lin2
  displayName: 9- Frameworks Amd Lin2
  pool: server
  timeoutInMinutes: 120
  dependsOn: [NativeAOT_Gold_Win, Trends_Gold_Lin, Trends_Intel_Lin, Trends_Database_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: frameworks-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine1
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile amd-lin2-app --profile gold-load-load --profile gold-db-db "
      
- job: GC_Gold_Lin
  displayName: 9- GC Gold Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [NativeAOT_Gold_Win, Trends_Gold_Lin, Trends_Intel_Lin, Trends_Database_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: gc-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine2
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-lin-app "
      
- job: GC_Intel_Lin
  displayName: 9- GC Intel Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [NativeAOT_Gold_Win, Trends_Gold_Lin, Trends_Intel_Lin, Trends_Database_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: gc-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine3
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-lin-app "
      
- job: WebSockets_Gold_Win
  displayName: 9- WebSockets Gold Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [NativeAOT_Gold_Win, Trends_Gold_Lin, Trends_Intel_Lin, Trends_Database_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: websocket-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: mono
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-win-app --profile gold-load2-load "
      
# GROUP 10

- job: Trends_Database_Gold_Win
  displayName: 10- Trends Database Gold Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Frameworks_Amd_Lin2, GC_Gold_Lin, GC_Intel_Lin, WebSockets_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: trend-database-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine1
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-win-app --profile gold-load2-load --profile gold-db-db "
      
- job: Single_File_Gold_Lin
  displayName: 10- Single File Gold Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Frameworks_Amd_Lin2, GC_Gold_Lin, GC_Intel_Lin, WebSockets_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: singlefile-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine2
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-lin-app --profile gold-load-load "
      
- job: Single_File_Intel_Lin
  displayName: 10- Single File Intel Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Frameworks_Amd_Lin2, GC_Gold_Lin, GC_Intel_Lin, WebSockets_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: singlefile-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine3
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-lin-app --profile intel-load-load "
      
- job: Crossgen_Intel_Win
  displayName: 10- Crossgen Intel Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Frameworks_Amd_Lin2, GC_Gold_Lin, GC_Intel_Lin, WebSockets_Gold_Win]
  condition: succeededOrFailed()
  steps:
  - template: crossgen2-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: mono
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-win-app --profile intel-load2-load "
      
# GROUP 11

- job: Crossgen_Gold_Lin
  displayName: 11- Crossgen Gold Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Trends_Database_Gold_Win, Single_File_Gold_Lin, Single_File_Intel_Lin, Crossgen_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: crossgen2-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine1
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-lin-app --profile gold-load-load "
      
- job: Crossgen_Intel_Lin
  displayName: 11- Crossgen Intel Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Trends_Database_Gold_Win, Single_File_Gold_Lin, Single_File_Intel_Lin, Crossgen_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: crossgen2-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine2
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-lin-app --profile intel-load-load "
      
- job: Crossgen_Amd_Lin2
  displayName: 11- Crossgen Amd Lin2
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Trends_Database_Gold_Win, Single_File_Gold_Lin, Single_File_Intel_Lin, Crossgen_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: crossgen2-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine3
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile amd-lin2-app --profile gold-load2-load "
      
- job: Build_Intel_Win
  displayName: 11- Build Intel Win
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Trends_Database_Gold_Win, Single_File_Gold_Lin, Single_File_Intel_Lin, Crossgen_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: build-perf-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: mono
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-win-app "
      
# GROUP 12

- job: Build_Gold_Lin
  displayName: 12- Build Gold Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Crossgen_Gold_Lin, Crossgen_Intel_Lin, Crossgen_Amd_Lin2, Build_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: build-perf-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine1
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile gold-lin-app "
      
- job: Build_Intel_Lin
  displayName: 12- Build Intel Lin
  pool: server
  timeoutInMinutes: 120
  dependsOn: [Crossgen_Gold_Lin, Crossgen_Intel_Lin, Crossgen_Amd_Lin2, Build_Intel_Win]
  condition: succeededOrFailed()
  steps:
  - template: build-perf-scenarios.yml
    parameters:
      connection: ASPNET Benchmarks Service Bus
      serviceBusQueueName: citrine2
      serviceBusNamespace: aspnetbenchmarks
      arguments: "$(ciProfile) --profile intel-lin-app "
      
