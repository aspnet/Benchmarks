parameters:
- name: scenarios 
  type: object
  default: 
  - displayName: "Plaintext"
    arguments: "-n Plaintext $(plaintextJobs)"
  - displayName: "Plaintext non pipelined"
    arguments: "-n PlaintextNonPipelined $(plaintextJobs)"

variables:
  plaintextJobs: -j https://raw.githubusercontent.com/aspnet/Benchmarks/master/src/Benchmarks/benchmarks.plaintext.json
  defaultArgs: --server $(server) --client $(client) --runtimeversion 5.0.* --self-contained --warmup 5 --duration 5 --collect-counters --description Trend/Latest
  sqlArgs: --table \"BENCHMARKS_CONNECTION_STRING\"

# Agent-less jobs need this pool
pool: server

jobs:
- job: Trend
  steps:
  - ${{ each s in parameters.scenarios }}:
    - template: trend-citrine-template.yml
      parameters:
        displayName: ${{ s.displayName }}
        arguments: "${{ s.arguments }} $(defaultArgs) $(sqlArgs)"
