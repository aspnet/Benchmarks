# Orchestrates all benchmarks

variables:
  - template: job-variables.yml
  - name: session
    value: $(Build.BuildNumber)
  - name: buildId
    value: $(Build.BuildId)
  - name: buildNumber
    value: $(Build.BuildNumber)

jobs:

- job: Trends
  pool: server
  timeoutInMinutes: 120
  strategy:
    maxParallel: 2
    matrix:
      Intel_Linux:
        bar: aspnet-citrine-lin
        foo: 'ASP.NET Benchmarks Queue'
      # Intel_Windows:
      #   bar: aspnet-citrine-win
      #   foo: ASP.NET Benchmarks Queue
      # Arm_Linux:
      #   bar: aspnet-citrine-arm
      #   foo: ASP.NET Benchmarks Queue
      # Amd_Linux:
      #   bar: aspnet-citrine-amd
      #   foo: ASP.NET Benchmarks Queue
  steps:
  - template: trend-v2-scenarios.yml
    parameters:
      warmup: 15
      duration: 15
      connection: $(foo)
      profile: $(bar)

